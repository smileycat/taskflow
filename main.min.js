"use strict";var idCounter=0,taskList=[];const sideNav=document.getElementById("side-panel"),taskContainer=document.getElementById("task-container"),userInput=document.getElementById("inputBox"),defaultConfig=[{name:"Today",icon:"far fa-calendar",active:!0,itemList:[{id:0,text:"Brainstorm some concepts"},{id:1,text:"Design wireframe and mockup âœï¸"},{id:2,text:"Bring umbrella home â›±"},{id:3,text:"Buy some cabbages ðŸ¥¬"},{id:4,text:"Pickup children from school ðŸ‘¨â€ðŸ‘§â€ðŸ‘¦"}]},{name:"This Week",icon:"far fa-calendar-alt",active:!1,itemList:[{id:5,text:"Hand in weekly report ðŸ“„"},{id:6,text:"Meeting with client ðŸ¤¦"}]},{name:"This Month",icon:"far fa-calendar-times",active:!1,itemList:[]},{name:"divider"},{name:"Reminders",icon:"far fa-bell",active:!1,itemList:[]},{name:"divider"},{name:"Completed",icon:"far fa-calendar-check",active:!1,itemList:[]}],sleep=e=>new Promise(t=>setTimeout(t,e));userInput.onkeydown=e=>{if("Enter"==e.key&&(e.preventDefault(),""!=userInput.value.trim())){appendItemDOM(Task.getCurrentTask().newItem(userInput.value.trim())),updateConfig(),userInput.value=""}};class Item{constructor(e,t){this.id=e,this.text=t}setText(e){this.text=e}clone(){return new Item(this.id,this.text)}}class Task{constructor(e,t,a,s){this.name=e,this.icon=t,this.active=s,this.itemList=[];for(const{id:e,text:t}of a)this.newItem(t)}getName(){return this.name}setName(e){this.name=e}newItem(e){const t=new Item(idCounter,e);return this.itemList.push(t),idCounter+=1,t}addItem(e){this.itemList.push(e)}getItem(e){for(const t of this.itemList)if(t.id==e)return t}updateItem(e,t){for(const a of this.itemList)a.id==e&&a.setText(t)}removeItem(e){for(var t=0;t<this.itemList.length;t++)if(this.itemList[t].id==e)return this.itemList.splice(t,1)}static setCurrentTask(e){this.curTask&&(this.curTask.active=!1);for(const t of taskList)t.name==e&&(t.active=!0,this.curTask=t);for(const e of this.curTask.itemList)appendItemDOM(e);return this.curTask}static getCurrentTask(){return this.curTask}static getTask(e){for(const t of taskList)if(t.name==e)return t}}function loadTasks(e){const{name:t,icon:a,itemList:s,active:n}=e;let i="";taskList.push(new Task(t,a,s,n)),n&&(i=" active",Task.setCurrentTask(t),document.getElementById("task-title").value=t);const m=`<div id="${t}" class="tab${i}" onclick="switchTask(&quot;${t}&quot;)">\n            <i class="${a}"></i>\n            <span class="ml-2">${t}</span>\n        </div>`;document.getElementById("side-panel").insertAdjacentHTML("beforeend",m)}function loadDivider(){taskList.push({name:"divider"});document.getElementById("side-panel").insertAdjacentHTML("beforeend",'<div class="divider"></div>')}function loadConfig(){let e=JSON.parse(localStorage.getItem("userConfig"));e=null==e?defaultConfig:e;for(const t of e)"divider"==t.name?loadDivider():loadTasks(t)}function updateConfig(){localStorage.setItem("userConfig",JSON.stringify(taskList))}function draggables(e,t){document.getElementById(e).draggable=!0}function undraggable(e,t){document.getElementById(e).draggable=!1}function showHideSideNav(){sideNav.className.includes("active")?(sideNav.setAttribute("data-show","off"),sideNav.className=sideNav.className.replace(" active","")):(sideNav.setAttribute("data-show","on"),sideNav.className+=" active")}function switchTask(e){let t=document.getElementById(Task.getCurrentTask().getName());t.className=t.className.replace(" active",""),document.getElementById(e).className+=" active",taskContainer.innerHTML="",Task.setCurrentTask(e),document.getElementById("task-title").value=e,sideNav.className=sideNav.className.replace(" active",""),updateConfig()}function updateTaskNameDOM(e){const t=Task.getCurrentTask().getName();Task.getCurrentTask().setName(e.value),document.getElementById(t).querySelector("span").innerText=e.value,document.getElementById(t).id=e.value,updateConfig()}function appendItemDOM(e){const{id:t,text:a}=e,s=`<li id="${t}" class="list-item">\n                        <button class="btn-none mr-2" onclick="completeItemDOM(${t})">&#9675;</button>\n                        <input type="text" class="item-input" value="${a}" onchange="updateItemDOM(${t}, this)" />\n                        <div class="append">\n                            <i class="fas fa-trash" onclick="removeItemDOM(${t});"></i>\n                            <i class="ml-2 fas fa-bars" onmousedown="draggables(${t}, this);" onmouseleave="undraggable(${t}, this);"></i>\n                        </div>\n                    </li>`;taskContainer.insertAdjacentHTML("beforeend",s)}function updateItemDOM(e,t){Task.getCurrentTask().updateItem(e,t.value),updateConfig(),""==t.value.trim()&&removeItemDOM(e)}function removeItemDOM(e){Task.getCurrentTask().removeItem(e),updateConfig(),document.getElementById(e).className="list-item animated fadeOutLeft faster",sleep(400).then(()=>{document.getElementById(e).remove()})}function completeItemDOM(e){const t=Task.getCurrentTask().getItem(e).clone();Task.getCurrentTask().removeItem(e),Task.getTask("Completed").addItem(t),updateConfig(),document.getElementById(e).className="list-item animated fadeOutUp faster",document.getElementById("Completed").className+=" animated pulse faster",sleep(500).then(()=>{document.getElementById(e).remove(),document.getElementById("Completed").className=document.getElementById("Completed").className.replace(" animated pulse faster","")})}loadConfig();